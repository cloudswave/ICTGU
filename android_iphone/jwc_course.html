<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
  <head>
    <title>
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

    <link rel="stylesheet" href="css/ui-img.css">
	<link rel="stylesheet" href="css/ui-list.css">
	<link rel="stylesheet" href="css/ui-tab.css">
	<link rel="stylesheet" href="css/ui-btn.css">
	<link rel="stylesheet" href="css/ui-base.css">
	<link rel="stylesheet" href="css/ui-box.css">
	<link rel="stylesheet" href="css/ui-color.css">
	<link rel="stylesheet" href="css/ui-res.css">
	<link rel="stylesheet" href="css/style.css">
	
    <script src="js/zy_control.js"></script>
    <script src="js/zy_click.js"></script>
	<script src="js/dis_control.js"></script>
	<script src="js/zy_json.js"></script>
	<script src="js/zy_tmpl.js"></script>
	<script src="js/zy_slide.js"></script>
	<script src="js/zy_anim.js"></script>
	<script src="js/zy_icache.js"></script>
	<script src="js/dis_ad.js"></script>
	<script src="js/config.js"></script>
    <script>
	</script>
	<style>
	input[type="radio"]+div.ip-sta{
		display:none !important;
	}
	input[type="radio"]:checked+div.ip-sta{	
		display:block !important;
	}
	
	.m-maxh{
		height:1.2em;
	}		
		
	
	
	
	</style>
  </head>
<body class="um-vp c-gra5" ontouchstart>
	
            <div id="header1" class="uh ip-sta">
            	<div class="c-blu3 c-m2 t-wh uc-a uba us b-gra uinn6">
	                <h1 class="ut ulev0 ut-s tx-c" id="ttl1">我的课表</h1>
						 <a class="btn btn-r btn-n ub ub-ac" ontouchstart="zy_touch('btn-act1')" onclick="btn_right();">       
			        	<div class="ulim" id="btnr">更新导入</div>
			        </a>
				</div>
				<div class="ub ub-ac ub-pc c-gra1 c-m2 uinn5 t-gra1 ulev-1 uc-a uba us b-gra uinn6">
					<input class="uhide" type="radio" name="menus" checked="true" id="menu1">
					<div class="ub-con ub-f1 tx-c dis-sta ut-s" ontouchstart="zy_touch('focuss')" onclick="menuSelected(1);">一</div>
					<input class="uhide" type="radio" name="menus" id="menu2">
					<div class="ub-con ub-f1 tx-c dis-sta" ontouchstart="zy_touch('focuss')" onclick="menuSelected(2);">二</div>
					<input class="uhide" type="radio" name="menus" id="menu3">
					<div class="ub-con ub-f1 tx-c dis-sta" ontouchstart="zy_touch('focuss')" onclick="menuSelected(3);">三</div>
					<input class="uhide" type="radio" name="menus" id="menu4">
					<div class="ub-con ub-f1 tx-c dis-sta" ontouchstart="zy_touch('focuss')" onclick="menuSelected(4);">四</div>
					<input class="uhide" type="radio" name="menus" id="menu5">
					<div class="ub-con ub-f1 tx-c dis-sta" ontouchstart="zy_touch('focuss')" onclick="menuSelected(5);">五</div>
					<input class="uhide" type="radio" name="menus" id="menu6">
					<div class="ub-con ub-f1 tx-c dis-sta" ontouchstart="zy_touch('focuss')" onclick="menuSelected(6);">六</div>
					<input class="uhide" type="radio" name="menus" id="menu0">
					<div class="ub-con ub-f1 tx-c dis-sta" ontouchstart="zy_touch('focuss')" onclick="menuSelected(0);">天</div>
				</div>
				<div style="height:1px;"></div>
            </div>
			
	<div>
	<!--星期1-->
	<input class="uhide" type="radio" name="pages" id="rd1" >
	<div class="c-gra5 ip-sta" id="page1">
		<div></div>
	</div>
	
	<input class="uhide" type="radio" name="pages" id="rd2" checked="true">
	<div class="c-gra5 ip-sta" id="page2">
		<div></div>
	</div>
	

	<input class="uhide" type="radio" name="pages" id="rd3">
	<div class="c-gra5 ip-sta" id="page3">
		<div></div>
	</div>
	
	<input class="uhide" type="radio" name="pages" id="rd4">
	<div class="c-gra5 ip-sta" id="page4">
		<div></div>
	</div>
	
		<input class="uhide" type="radio" name="pages" id="rd5">
	<div class="c-gra5 ip-sta" id="page5">
		<div></div>
	</div>
	
		<input class="uhide" type="radio" name="pages" id="rd6">
	<div class="c-gra5 ip-sta" id="page6">
		<div></div>
	</div>
	
		<input class="uhide" type="radio" name="pages" id="rd0">
	<div class="c-gra5 ip-sta" id="page0">
		<div></div>
	</div>
	
	
	</div>
</body>
<script>

var pages =  {curid:1, updr:'0'};
var course;

zy_init();

var updated = 0;
window.uexOnload=function(type)
{
	
	//setPageBounce(downcb, upcb);
	zy_initcache();
	
	var day=new Date().getDay();
	//alert(day);
	menuSelected(day);//切换到当天
	
	
	course=getStorJson('course');
	//alert(course[0]);

	if(!course[0]){

		  uexWindow.toast('0', '5', '请导入课表', 2000);
           btn_right();
	}


	var time=getStorJson('course_time');
	 var t=time.year+"_";
	 switch(time.term) {
	case 1:
	    t+="春季学期";
		break;
	case 3:
	    t+="秋季学期";
		break;		
	default: 
		t+="当前学期";
   }

	 $$("ttl1").innerHTML="我的课表_"+t;
	showCourse();
}


function radioSelect(id){
	var ret = 0;
	var e = $$(id);
	if(e && !e.checked){
		e.checked = true;
		ret = 1;
	}
	return ret;
}

function menuSelected(i){	
	pageSwitch(i);
	radioSelect('menu'+i);
}


function pageSwitch(i){
	if(i==pages.curid) return;
	pages.curid = i;
	
	var ch = $$('rd'+i);
	if(ch && !ch.checked) ch.checked = true;
}


function showCourse(){
	
	//alert(JSON.stringify(course));
	for(var i=1;i<=7;i++){
					var tmpl = '<li ontouchstart="zy_touch(\'onbg\')" onclick="" class="uc-n ubb ub b-gra t-bla ub-ac lis" id="">'
				 		+'<div class="ub-f1 ub ub-ver">'	 
				 	    	+'<div class="ulev0 ut-s">${'+i+'}</div>	'	    
				    		+'<div class="ulev-1 umh3 t-gra umar-t">节次：${'+0+'}</div>' 
				 	    	+'<div class="ub ub-ac t-gra ulev-2 umar-t">'
				 		    	+'<div class="umh2 umw2 ub-img5 im3 lpic ub-posl"></div>'
				 		    	+''
				 		    	+'<div class="umh2 umw2 ub-img5 im4 lpicl lpic ub-posl"></div> '
				 		    	+'<div class="ub-f1"></div>'
								+'<div class="umh2 umw2 ub-img5 im5 lpicl lpic"></div>'
				 		    	+''
				 		   +' </div>'
				 		+'</div> '
						+'<div class="res8 lis-sw ub-img4"></div>  '   
				 	+'</li><li class="ubt1"></li>';
					
			var res = zy_tmpl(tmpl,course,zy_tmpl_count(course),null);
			var node = document.createElement("ul");
			node.className = "b-gra c-gra uc-n";
			node.innerHTML = res;
			var cContent = $$('page'+i%7);
			cContent.innerHTML="";//初始化
			cContent.insertBefore(node,cContent.lastElementChild);
	}
}

function btn_right(){
	//setStorJson('course',"0");
	//alert(getStorJson('course'));

	  var str = '{"view":"course"}';
	  if(str) setstorage('params', str);
	   openwin('jwc_login','jwc_login.html','10');
}

</script>
</html>