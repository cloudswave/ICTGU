<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
<head>
	<title>
	</title>
	<meta charset="utf-8">
	<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="stylesheet" href="css/ui-img.css">
	<link rel="stylesheet" href="css/ui-res.css">
	<link rel="stylesheet" href="css/ui-list.css">
	<link rel="stylesheet" href="css/ui-base.css">
	<link rel="stylesheet" href="css/ui-box.css">
	<link rel="stylesheet" href="css/ui-color.css">
	<link rel="stylesheet" href="css/style.css">
	<script src="js/zy_control.js"></script>
	<script src="js/zy_click.js"></script>
	<script src="js/zy_json.js"></script>
	<script src="js/zy_tmpl.js"></script>
	<script src="js/zy_anim.js"></script>
	<script src="js/dis_control.js"></script>
	<script src="js/config.js"></script>
	<script>
	</script>
</head>
<body class="um-vp" ontouchstart>

	<!--最新帖子-->
	<div class="" id="page1">
		<div></div>
	</div>
</body>
<script>
zy_init();

var params = getStorJson('params');
var view = params.view;
var curpage=1;
var cContent = $$('page1');
var uid = '';

var updated = 0;
window.uexOnload=function(type)
{
	if(!type){
		setPageBounce(downcb, upcb);
		loadList('', '1');
		//if(updated) loadList('', '');
	}
}
function downcb(){
	loadList('', '');
}
function upcb(){
	loadList('', '');
}

function loadList(pn, flag){

	if(jwc_score_url){
		updated = checkKey(jwc_score_url);
		if(!updated) uexWindow.toast('1','5','更新中...',"");
		
		$.getJSON(jwc_score_url, getJsonCallback, 'text', getJsonErr, 'GET', '', flag);
	}
}
function getJsonCallback(json){
	uexWindow.closeToast();
	resetBV('0');
	resetBV('1');
	
	 var json = JSON.parse(json);	
	
	if (json) {
		if (Int(json.status)<1) {
	
				   uexWindow.toast('0','5',json.info,2000);
				   openwin('jwc','jwc_login.html','10');
				   

				return;
			}
			
		var list = json.data;
		var length = zy_tmpl_count(list);

		if(list && list[0]){
			//var id0 = 0;
			//var id1 = list[0].tid;
			//if(cContent && cContent.children[0] && cContent.children[0].children[0]) id0=cContent.children[0].children[0].id;
			//logs('id0='+id0+', id1='+id1);
			//if(id0==id1) return;
		}
		
		var tmpl = '';

			tmpl = '<li ontouchstart="zy_touch(\'onbg\')" onclick="" class="uc-n ubb ub b-gra t-bla ub-ac lis" id="">' +
			'<div class="ub-f1 ub ub-ver">' +
			'<div class="ulev0 ut-s">${3}-${6}分</div>' +
			'<div class="ulev-1 umh3 t-gra umar-t">${5}</div>' +
			'<div class="ub ub-ac t-gra ulev-2 umar-t">' +
			'<div class="umh2 umw2 ub-img5 im3 lpic ub-posl"></div> ' +
			'课程学分:${4}学分' +
			'<div class="umh2 umw2 ub-img5 im4 lpicl lpic ub-posl"></div>' +
			'<div class="ub-f1">获得${7}学分</div>' +
			'<div class="umh2 umw2 ub-img5 im5 lpicl lpic"></div>' +
			'${1}学年${2}学期' +
			'</div>' +
			'</div>' +
			'<div class="res8 lis-sw ub-img4"></div>' +
			'</li><li class="ubt1"></li>';
		
		
		var res = zy_tmpl(tmpl,list,length,null);
		
		
       	if(curpage==1)
       	{
       		while(cContent.childElementCount>1)
       		{
       			cContent.removeChild(cContent.firstElementChild);
       		}
       	}
		if(!res) res='<div class="tx-c"><div class="umh1"></div><div>暂无数据</div></div>';
		var node = document.createElement("ul");
		node.className = "b-gra c-gra uc-n";
		node.innerHTML = res;
		cContent.insertBefore(node,cContent.lastElementChild);
	}
}


function reflash(){
	 $.clearLS(jwc_score_url);
	loadList('', '');
}

</script>
</html>
